<!DOCTYPE html>
<html>
<head>
	<title>Code4Lib 2016 Web Map Workshop</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <style type="text/css">
        #fullscreen {
            top:0;
            left:0;
            position: absolute;
            position: fixed;
            width:100%;
            height:100%;
            display:block;
            margin: 0;
        }
        #map {
          width: 100%;
          height: 100%;
        }
        #opacity-slider {
            position: absolute;
            z-index: 999;
            top: 12em;
            right: -40em;
            transform: rotate(-90deg);
        }
    </style>
</head>
<body>
    <div id="fullscreen">
        <input type="range" id="opacity-slider" value='1' min="0" max="1" step="0.1" oninput="changeOpacity(this.value)" onchange="changeOpacity(this.value)" />
    	<div id="map"></div>
    </div>
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script>

        var map = L.map('map').setView([33.738808,-84.371631], 15);

        var aerial = L.tileLayer('http://oatile{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg', {
            attribution: 'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency contributors Georgia State University and Emory University',
            subdomains: '1234'
        });

		var osm = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="http://mapbox.com">Mapbox</a> ',
			id: 'mapbox.streets'
		}).addTo(map);

        var baseMaps = {
            "Open Stree Map": osm,
            "Aerial": aerial
        };


        L.control.layers(baseMaps).addTo(map);

        var tile = L.tileLayer('/Users/jsvarne/Sandbox/geoserverUpload/geotiffs/processed/atlanta_1928_sheet45/{z}/{x}/{y}.png', {
            tms: true,
            attribution: 'Emory University'
        }).addTo(map).setZIndex(10).getContainer();
        tile.id += 'raster';
	</script>

    <!-- JavaScript to adjust the opacity -->
    <script type="text/javascript">
    function changeOpacity(val) {
        document.getElementById("raster").style.opacity = val;
    }
  </script>
</body>
</html>
